{"version":3,"sources":["../../../../src/app/%28dashboard%29/manpower/ManpowerClient.tsx","../../../../src/components/WorkerModal.tsx","../../../../src/app/actions/data%3A61d48b%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3A9fc624%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3A37e0cb%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3A123f2c%20%3Ctext/javascript%3E","../../../../src/components/UserList.tsx","../../../../src/app/actions/data%3A0e745b%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3Adf0042%20%3Ctext/javascript%3E","../../../../src/components/UserModal.tsx","../../../../src/app/actions/data%3Ab0b585%20%3Ctext/javascript%3E","../../../../src/components/UserManagement.tsx","../../../../src/components/AttendanceActionControls.tsx","../../../../src/components/AttendanceTable.tsx","../../../../src/app/actions/data%3A6fc66b%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3A42a50b%20%3Ctext/javascript%3E","../../../../src/app/actions/data%3A618ace%20%3Ctext/javascript%3E","../../../../src/components/StaffManagement.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useMemo, useEffect } from \"react\";\nimport { PremiumTable } from \"@/components/PremiumTable\";\nimport { ManpowerData, Attendance, DailyReport, Worker, User } from \"@/types\";\nimport { WorkerModal } from \"@/components/WorkerModal\";\nimport { deleteWorker, submitBulkAttendance } from \"@/app/actions/manpower\";\nimport { toast } from \"sonner\";\nimport { useRouter } from \"next/navigation\";\nimport { UserManagement } from \"@/components/UserManagement\";\nimport { AttendanceActionControls } from \"@/components/AttendanceActionControls\";\nimport { AttendanceTable } from \"@/components/AttendanceTable\";\nimport { StaffManagement } from \"@/components/StaffManagement\";\nimport { ExportButton } from \"@/components/ExportButton\";\n\ninterface Props {\n    data: ManpowerData & { allUsers?: User[] };\n    userRole?: string;\n    userName?: string;\n    userRegion?: string | null;\n    userShiftId?: number | null;\n    userShiftName?: string | null;\n    userAllowedShifts?: string | null;\n}\n\nexport function ManpowerClient({\n    data,\n    userRole = \"manager\",\n    userName = \"Admin\",\n    userRegion,\n    userShiftId,\n    userAllowedShifts\n}: Props) {\n    const router = useRouter();\n    // Default tab based on role? Or just default to Reports\n    const [activeTab, setActiveTab] = useState(\"reports\");\n    const [searchTerm, setSearchTerm] = useState(\"\");\n\n    // Parse supervisor regions\n    const supervisorRegions = useMemo(() => {\n        if (!userRegion) return [];\n        return userRegion.split(\",\").map(r => r.trim());\n    }, [userRegion]);\n\n    // Attendance Marking State\n    const [attendanceDate, setAttendanceDate] = useState<string>(new Date().toISOString().split('T')[0]);\n    // Initialize region: if multiple regions, default to \"All\", otherwise specific region or \"All\"\n    const [selectedRegion, setSelectedRegion] = useState<string>(\n        userRegion && !userRegion.includes(\",\") ? userRegion : \"All\"\n    );\n    const [selectedShift, setSelectedShift] = useState<string>(userShiftId ? userShiftId.toString() : \"All\");\n\n    // Filter available regions for dropdown\n    const availableRegions = useMemo(() => {\n        if (userRole !== \"supervisor\" || supervisorRegions.length === 0) return data.regions;\n        return data.regions.filter(r => supervisorRegions.includes(r.name));\n    }, [data.regions, userRole, supervisorRegions]);\n\n    // Derived available shifts\n    const availableShifts = useMemo(() => {\n        if (userRole === \"manager\") return data.shifts;\n\n        if (userRole === \"supervisor\") {\n            if (userAllowedShifts) {\n                const allowedNames = userAllowedShifts.split(\",\").map(s => s.trim()).filter(Boolean);\n                return data.shifts.filter(s => allowedNames.includes(s.name));\n            }\n            // Default: only their assigned shift\n            if (userShiftId) {\n                return data.shifts.filter(s => s.id === userShiftId);\n            }\n        }\n\n        return data.shifts; // Default for other roles or if supervisor conditions not met\n    }, [data.shifts, userRole, userShiftId, userAllowedShifts]);\n\n    // [FIX] Sync selectedShift with availableShifts\n    useEffect(() => {\n        if (availableShifts.length > 0) {\n            const isValid = availableShifts.some(s => s.id.toString() === selectedShift);\n            if (!isValid && selectedShift !== \"All\") {\n                setSelectedShift(availableShifts[0].id.toString());\n            } else if (selectedShift === \"All\" && userRole === \"supervisor\" && userAllowedShifts) {\n                // If supervisor has specific allowed shifts, don't default to \"All\" (which might show nothing)\n                setSelectedShift(availableShifts[0].id.toString());\n            }\n        }\n    }, [availableShifts, selectedShift, userRole, userAllowedShifts]);\n\n    // Track attendance overrides: { [date]: { [workerId]: { status?: string; notes?: string } } }\n    const [attendanceBuffer, setAttendanceBuffer] = useState<Record<string, Record<number, { status?: string; notes?: string }>>>({});\n    const [isSubmitting, setIsSubmitting] = useState(false);\n\n    // Helper to get effective status\n    const getWorkerStatus = (workerId: number) => {\n        // 1. Check local override\n        if (attendanceBuffer[attendanceDate]?.[workerId]?.status) return attendanceBuffer[attendanceDate][workerId].status!;\n\n        // 2. Check existing DB record\n        const existing = data.allAttendance?.find(a =>\n            a.workerId === workerId &&\n            new Date(a.date).toISOString().split('T')[0] === attendanceDate\n        );\n        if (existing) return existing.status || \"Present\";\n\n        // 3. Default\n        return \"Present\";\n    };\n\n    const getWorkerNotes = (workerId: number) => {\n        if (attendanceBuffer[attendanceDate]?.[workerId]?.notes !== undefined) return attendanceBuffer[attendanceDate][workerId].notes!;\n\n        const existing = data.allAttendance?.find(a =>\n            a.workerId === workerId &&\n            new Date(a.date).toISOString().split('T')[0] === attendanceDate\n        );\n        return existing?.notes || \"\";\n    };\n\n    // Handle single worker status change\n    const handleStatusChange = (workerId: number, status: string) => {\n        setAttendanceBuffer(prev => ({\n            ...prev,\n            [attendanceDate]: {\n                ...(prev[attendanceDate] || {}),\n                [workerId]: { ...(prev[attendanceDate]?.[workerId] || {}), status }\n            }\n        }));\n    };\n\n    const handleNotesChange = (workerId: number, notes: string) => {\n        setAttendanceBuffer(prev => ({\n            ...prev,\n            [attendanceDate]: {\n                ...(prev[attendanceDate] || {}),\n                [workerId]: { ...(prev[attendanceDate]?.[workerId] || {}), notes }\n            }\n        }));\n    };\n\n    // Consolidated Worker Filtering Logic\n    const attendanceWorkers = useMemo(() => {\n        return data.workers.filter(w => {\n            // 1. Region Filter\n            if (userRole === \"supervisor\") {\n                // If specific region selected, match it\n                if (selectedRegion !== \"All\" && w.region !== selectedRegion) return false;\n                // If \"All\" selected, ensuring worker is in one of the supervisor's allowed regions\n                if (selectedRegion === \"All\" && (!w.region || !supervisorRegions.includes(w.region))) return false;\n            } else {\n                // Manager/Admin\n                if (selectedRegion !== \"All\" && w.region?.toLowerCase().trim() !== selectedRegion.toLowerCase().trim()) return false;\n            }\n\n            // 2. Shift Filter (Smart Parent/Child)\n            const allowedNames = userAllowedShifts ? userAllowedShifts.split(\",\").map(s => s.trim()).filter(Boolean) : [];\n\n            if (selectedShift !== \"All\") {\n                const shiftObj = data.shifts.find(s => s.id.toString() === selectedShift);\n                if (shiftObj) {\n                    // Restriction check for supervisors\n                    if (userRole === \"supervisor\") {\n                        // If they have allowed shifts, only show matching workers\n                        if (allowedNames.length > 0) {\n                            if (!allowedNames.includes(w.shiftName || \"\")) return false;\n                        } else if (userShiftId && w.shiftId !== userShiftId) {\n                            // Default fallback: only their own shift\n                            return false;\n                        }\n                    }\n\n                    // Strict filter for the current view\n                    if (shiftObj.name === \"A\" || shiftObj.name === \"B\") {\n                        // If filtering by \"A\", show \"A\", \"A1\", \"A2\" etc.\n                        if (!w.shiftName || !w.shiftName.startsWith(shiftObj.name)) return false;\n                    } else {\n                        // Regular specific shift match\n                        if (w.shiftId?.toString() !== selectedShift) return false;\n                    }\n                }\n            } else if (userRole === \"supervisor\") {\n                // \"All\" selected but supervisor role\n                if (allowedNames.length > 0) {\n                    if (!w.shiftName || !allowedNames.includes(w.shiftName)) return false;\n                } else if (userShiftId && w.shiftId !== userShiftId) {\n                    return false;\n                }\n            }\n\n            // 3. Search\n            if (searchTerm && !w.name.toLowerCase().includes(searchTerm.toLowerCase()) &&\n                !(w.empId && w.empId.includes(searchTerm))) return false;\n\n            return true;\n        });\n    }, [data.workers, selectedRegion, selectedShift, searchTerm, userRole, supervisorRegions, data.shifts, userAllowedShifts, userShiftId]);\n\n\n    const handleSubmitAttendance = async () => {\n        if (!confirm(`Submit attendance for ${attendanceDate}? Previous records for this date/shift/region will be overwritten.`)) return;\n\n        const currentWorkers = attendanceWorkers;\n\n        if (currentWorkers.length === 0) {\n            toast.error(\"No workers to submit attendance for.\");\n            return;\n        }\n\n        const attendanceData = currentWorkers.map(w => ({\n            workerId: w.id,\n            status: getWorkerStatus(w.id) || \"Present\",\n            notes: getWorkerNotes(w.id),\n            shiftId: w.shiftId // Pass the worker's assigned shift\n        }));\n\n        if (isSubmitting) return;\n        setIsSubmitting(true);\n\n        try {\n            const targetShiftId = parseInt(selectedShift);\n            // If All shifts selected (isNaN), we pass 0/null to action, but relying on record per day\n            const globalShiftId = isNaN(targetShiftId) ? 0 : targetShiftId;\n\n            const res = await submitBulkAttendance(\n                attendanceData,\n                attendanceDate,\n                globalShiftId,\n                userName\n            );\n\n            if (res.success) {\n                toast.success(res.message);\n                router.refresh();\n                // Clear buffer after success if desired, or keep it.\n                // setAttendanceBuffer({});\n            } else {\n                toast.error(res.message);\n            }\n        } catch {\n            toast.error(\"Failed to submit attendance\");\n        } finally {\n            setIsSubmitting(false);\n        }\n    };\n\n\n    // Aggregate attendance data for the table\n    const dailyReports = useMemo(() => {\n        if (!data.allAttendance) return [];\n\n        const grouped = new Map<string, DailyReport>();\n\n        data.allAttendance.forEach((record: Attendance) => {\n            // Global Date Filter\n            const recordDateStr = new Date(record.date).toISOString().split('T')[0];\n            if (recordDateStr !== attendanceDate) return;\n\n            // Global Region Filter\n            const region = record.worker?.region || \"Unknown\";\n            if (selectedRegion !== \"All\" && region !== selectedRegion) return;\n\n            // Filter: If supervisor, only show their own reports (if they want to see only theirs)\n            // But usually reports tab shows all they are allowed to see\n            if (userRole === \"supervisor\" && record.supervisor !== userName) {\n                // If we want supervisors to only see what they submitted\n                // return; \n            }\n\n            const dateStr = new Date(record.date).toLocaleDateString();\n            const shiftId = (record.shiftId || \"General\").toString();\n            // Global Shift Filter\n            if (selectedShift !== \"All\" && shiftId !== selectedShift) return;\n\n            const key = `${dateStr}-${region}-${shiftId}`;\n\n            if (!grouped.has(key)) {\n                grouped.set(key, {\n                    id: key,\n                    date: dateStr,\n                    region: region,\n                    shift: shiftId,\n                    totalWorkers: 0,\n                    presentCount: 0,\n                    absentCount: 0\n                });\n            }\n\n            const group = grouped.get(key)!;\n            group.totalWorkers++;\n            if (record.status === \"Present\") group.presentCount++;\n            if (record.status === \"Absent\") group.absentCount++;\n        });\n\n        // If no data, return empty array\n        return Array.from(grouped.values());\n\n    }, [data.allAttendance, userRole, userName, attendanceDate, selectedRegion, selectedShift]);\n\n    const handleEditReport = (report: DailyReport) => {\n        // Convert date back to YYYY-MM-DD for input\n        // report.date is locale string (e.g. 1/22/2026), need to parse carefully or rely on stored date\n        // Ideally DailyReport should store raw date string too, but let's try to parse\n        const parts = report.date.split('/');\n        if (parts.length === 3) {\n            const date = new Date(report.date);\n            // Adjust for timezone offset to keep the same day\n            const offset = date.getTimezoneOffset();\n            const adjustedDate = new Date(date.getTime() - (offset * 60 * 1000));\n            setAttendanceDate(adjustedDate.toISOString().split('T')[0]);\n        }\n\n        // Better approach: find a sample record from this report to get the raw date\n        const sampleRecord = data.allAttendance.find(a => {\n            const dateStr = new Date(a.date).toLocaleDateString();\n            const region = a.worker?.region || \"Unknown\";\n            const shiftId = (a.shiftId || \"General\").toString();\n            return `${dateStr}-${region}-${shiftId}` === report.id;\n        });\n\n        if (sampleRecord) {\n            setAttendanceDate(new Date(sampleRecord.date).toISOString().split('T')[0]);\n        }\n\n        setSelectedRegion(report.region);\n        setSelectedShift(report.shift);\n        setActiveTab(\"mark_attendance\");\n        toast.info(\"Edit mode: Attendance data loaded.\");\n    };\n\n\n\n    // Detail View State\n    const [selectedReport, setSelectedReport] = useState<DailyReport | null>(null);\n\n    const workerColumns = [\n        {\n            header: \"Name\", accessorKey: \"name\" as const, render: (row: Worker) => (\n                <span className=\"font-medium text-slate-900\">{row.name}</span>\n            )\n        },\n        { header: \"ID\", accessorKey: \"empId\" as const },\n        { header: \"Role\", accessorKey: \"role\" as const },\n        { header: \"Region\", accessorKey: \"region\" as const },\n        {\n            header: \"Shift\", accessorKey: \"shiftName\" as const, render: (row: Worker) => (\n                <span className=\"px-2 py-1 rounded bg-slate-100 text-xs text-slate-600\">{row.shiftName || \"-\"}</span>\n            )\n        },\n    ];\n\n    // Modal State\n    const [isModalOpen, setIsModalOpen] = useState(false);\n    const [editingWorker, setEditingWorker] = useState<Worker | null>(null);\n    const [isDeleting, setIsDeleting] = useState(false);\n\n    // Handlers\n    const handleAddWorker = () => {\n        setEditingWorker(null);\n        setIsModalOpen(true);\n    };\n\n    const handleEditWorker = (worker: Worker) => {\n        setEditingWorker(worker);\n        setIsModalOpen(true);\n    };\n\n    const handleDeleteWorker = async (id: number) => {\n        if (isDeleting) return;\n        if (confirm(\"Are you sure you want to delete this worker? This will also delete their attendance records.\")) {\n            setIsDeleting(true);\n            const toastId = toast.loading(\"Deleting worker...\");\n            try {\n                const res = await deleteWorker(id);\n                if (res.success) {\n                    toast.success(\"Worker deleted successfully\", { id: toastId });\n                    router.refresh();\n                } else {\n                    toast.error(res.message, { id: toastId });\n                }\n            } catch {\n                toast.error(\"Failed to delete worker\", { id: toastId });\n            } finally {\n                setIsDeleting(false);\n            }\n        }\n    };\n\n    // Filter workers based on search (for Management Tab)\n    const filteredWorkers = data.workers.filter(w => {\n        // Search Filter\n        const matchesSearch = w.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n            (w.empId && w.empId.includes(searchTerm));\n        if (!matchesSearch) return false;\n\n        // Global Region Filter\n        if (selectedRegion !== \"All\" && w.region !== selectedRegion) return false;\n\n        // Global Shift Filter\n        if (selectedShift !== \"All\" && w.shiftId?.toString() !== selectedShift) return false;\n\n        return true;\n    });\n\n    const tabs = [\"reports\", \"mark_attendance\"];\n    const isManager = userRole === \"manager\";\n\n    if (isManager) {\n        tabs.push(\"workers\", \"users\", \"staff\");\n    }\n\n    // Helper data for specific lists to export\n    const flatAttendanceList = useMemo(() => {\n        return data.allAttendance?.map(a => ({\n            Date: new Date(a.date).toLocaleDateString(),\n            Worker: a.worker?.name || a.workerName || \"Unknown\",\n            Role: a.worker?.role || \"-\",\n            Region: a.worker?.region || \"-\",\n            Shift: data.shifts.find(s => s.id === a.shiftId)?.name || a.shiftId || \"-\",\n            Status: a.status,\n            Notes: a.notes || \"-\",\n            Supervisor: a.supervisor || \"-\"\n        })) || [];\n    }, [data.allAttendance, data.shifts]);\n\n    const flatWorkersList = useMemo(() => {\n        return filteredWorkers.map(w => ({\n            Name: w.name,\n            ID: w.empId || \"-\",\n            Role: w.role || \"-\",\n            Region: w.region || \"-\",\n            Shift: w.shiftName || \"-\",\n            Status: w.status\n        }));\n    }, [filteredWorkers]);\n\n    return (\n        <div className=\"space-y-6 animate-fade-in pb-12\">\n            <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\n                <div>\n                    <h1 className=\"text-2xl font-bold text-slate-900\">Manpower Reports</h1>\n                    <p className=\"text-slate-500 text-sm\">Track attendance and workforce dynamics</p>\n                </div>\n            </div>\n\n            <div className=\"flex flex-col gap-4\">\n                <div className=\"overflow-x-auto pb-2 -mx-4 px-4 md:mx-0 md:px-0\">\n                    <div className=\"bg-white p-1 rounded-xl border border-slate-200 inline-flex shadow-sm min-w-max\">\n                        {tabs.map((tab) => (\n                            <button\n                                key={tab}\n                                onClick={() => setActiveTab(tab)}\n                                className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${activeTab === tab\n                                    ? \"bg-blue-600 text-white shadow-sm\"\n                                    : \"text-slate-600 hover:bg-slate-50 hover:text-slate-900\"\n                                    }`}\n                            >\n                                {tab.charAt(0).toUpperCase() + tab.slice(1).replace(\"_\", \" \")}\n                            </button>\n                        ))}\n                    </div>\n                </div>\n\n                <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4 bg-white p-4 rounded-xl border border-slate-200 shadow-sm\">\n                    <AttendanceActionControls\n                        activeTab={activeTab}\n                        userRole={userRole}\n                        attendanceDate={attendanceDate}\n                        setAttendanceDate={setAttendanceDate}\n                        selectedRegion={selectedRegion}\n                        setSelectedRegion={setSelectedRegion}\n                        availableRegions={availableRegions}\n                        selectedShift={selectedShift}\n                        setSelectedShift={setSelectedShift}\n                        shifts={availableShifts}\n                        onSubmit={handleSubmitAttendance}\n                        onAddWorker={handleAddWorker}\n                        isLoading={isSubmitting}\n                        mode=\"filters\"\n                    />\n                    <div className=\"flex justify-end\">\n                        <AttendanceActionControls\n                            activeTab={activeTab}\n                            userRole={userRole}\n                            attendanceDate={attendanceDate}\n                            setAttendanceDate={setAttendanceDate}\n                            selectedRegion={selectedRegion}\n                            setSelectedRegion={setSelectedRegion}\n                            availableRegions={availableRegions}\n                            selectedShift={selectedShift}\n                            setSelectedShift={setSelectedShift}\n                            shifts={availableShifts}\n                            onSubmit={handleSubmitAttendance}\n                            onAddWorker={handleAddWorker}\n                            isLoading={isSubmitting}\n                            mode=\"actions\"\n                        />\n                    </div>\n                </div>\n            </div>\n\n            <div className=\"card-premium p-6\">\n                {/* Search Bar - Shared */}\n                <div className=\"mb-6\">\n                    <input\n                        type=\"text\"\n                        placeholder={activeTab === \"reports\" ? \"Search reports...\" : \"Search workers...\"}\n                        value={searchTerm}\n                        onChange={(e) => setSearchTerm(e.target.value)}\n                        className=\"w-full max-w-md px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-all\"\n                    />\n                </div>\n\n                {activeTab === \"reports\" && (\n                    <>\n                        {(() => {\n                            // Group reports by Date\n                            const groupedReports = dailyReports.reduce((acc, report) => {\n                                const dateKey = report.date;\n                                if (!acc[dateKey]) acc[dateKey] = [];\n                                acc[dateKey].push(report);\n                                return acc;\n                            }, {} as Record<string, DailyReport[]>);\n\n                            return Object.entries(groupedReports).map(([date, reports]) => (\n                                <div key={date} className=\"mb-8\">\n                                    <div className=\"flex items-center gap-2 mb-3\">\n                                        <h3 className=\"text-lg font-bold text-slate-800 flex items-center gap-2\">\n                                            <span className=\"w-2.5 h-2.5 rounded-full bg-blue-600\"></span>\n                                            {date}\n                                        </h3>\n                                        <span className=\"text-xs font-medium text-slate-500 bg-slate-100 px-2 py-1 rounded-full border border-slate-200\">\n                                            {reports.length} Regions\n                                        </span>\n                                    </div>\n                                    <div className=\"flex justify-end gap-2 mb-2\">\n                                        <ExportButton\n                                            data={reports.map(r => ({\n                                                Date: r.date,\n                                                Region: r.region,\n                                                Shift: r.shift,\n                                                Total_Workers: r.totalWorkers,\n                                                Present: r.presentCount,\n                                                Absent: r.absentCount\n                                            }))}\n                                            fileName={`Daily_Reports_${date.replace(/\\//g, '-')}`}\n                                            label=\"Export Summary\"\n                                        />\n                                        <ExportButton\n                                            data={flatAttendanceList.filter(a => a.Date === date)}\n                                            fileName={`Detailed_Attendance_${date.replace(/\\//g, '-')}`}\n                                            label=\"Export Detailed\"\n                                            className=\"bg-slate-800 hover:bg-slate-900\"\n                                        />\n                                    </div>\n                                    <PremiumTable\n                                        columns={[\n                                            { header: \"Region\", accessorKey: \"region\" as const },\n                                            {\n                                                header: \"Total Workers\", accessorKey: \"totalWorkers\" as const, render: (row: DailyReport) => (\n                                                    <span className=\"font-semibold text-slate-700\">{row.totalWorkers}</span>\n                                                )\n                                            },\n                                            {\n                                                header: \"Present\", accessorKey: \"presentCount\" as const, render: (row: DailyReport) => (\n                                                    <span className=\"text-green-600 font-bold\">{row.presentCount}</span>\n                                                )\n                                            },\n                                            {\n                                                header: \"Absent\", accessorKey: \"absentCount\" as const, render: (row: DailyReport) => (\n                                                    <span className=\"text-red-500\">{row.absentCount}</span>\n                                                )\n                                            },\n                                            {\n                                                header: \"Actions\",\n                                                render: (row: DailyReport) => (\n                                                    <div className=\"flex items-center gap-3\">\n                                                        <button\n                                                            onClick={() => setSelectedReport(row)}\n                                                            className=\"text-blue-600 hover:text-blue-800 font-medium text-sm underline\"\n                                                        >\n                                                            View Details\n                                                        </button>\n                                                        {/* Allow Edit if Supervisor or Manager */}\n                                                        {userRole === 'supervisor' || userRole === 'manager' ? (\n                                                            <button\n                                                                onClick={() => handleEditReport(row)}\n                                                                className=\"text-amber-600 hover:text-amber-800 font-medium text-sm flex items-center gap-1\"\n                                                            >\n                                                                <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className=\"w-4 h-4\">\n                                                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10\" />\n                                                                </svg>\n                                                                Edit\n                                                            </button>\n                                                        ) : null}\n                                                    </div>\n                                                )\n                                            }\n                                        ]}\n                                        data={reports}\n                                    />\n                                </div>\n                            ));\n                        })()}\n\n                        {selectedReport && (\n                            <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n                                <div className=\"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col\">\n                                    <div className=\"px-6 py-4 border-b border-slate-100 flex justify-between items-center bg-slate-50\">\n                                        <div>\n                                            <h3 className=\"text-lg font-bold text-slate-900\">\n                                                Attendance Details\n                                            </h3>\n                                            <p className=\"text-sm text-slate-500\">\n                                                {selectedReport.date} - {selectedReport.region} ({selectedReport.shift})\n                                            </p>\n                                        </div>\n                                        <button\n                                            onClick={() => setSelectedReport(null)}\n                                            className=\"text-slate-400 hover:text-slate-600 p-1\"\n                                        >\n                                            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                                            </svg>\n                                        </button>\n                                    </div>\n\n                                    <div className=\"p-6 overflow-y-auto\">\n                                        <PremiumTable\n                                            columns={[\n                                                { header: \"Worker Name\", render: (att: Attendance) => <span className=\"font-medium\">{att.worker?.name || att.workerName || \"Unknown\"}</span> },\n                                                {\n                                                    header: \"Status\",\n                                                    accessorKey: \"status\" as const,\n                                                    render: (att: Attendance) => (\n                                                        <span className={`px-2 py-1 rounded-full text-xs font-semibold ${att.status === 'Present' ? 'bg-green-100 text-green-700' :\n                                                            att.status === 'Absent' ? 'bg-red-100 text-red-700' :\n                                                                'bg-yellow-100 text-yellow-700'\n                                                            }`}>\n                                                            {att.status}\n                                                        </span>\n                                                    )\n                                                },\n                                                { header: \"Notes\", accessorKey: \"notes\" as const },\n                                                { header: \"Supervisor\", accessorKey: \"supervisor\" as const }\n                                            ]}\n                                            data={data.allAttendance.filter(att => {\n                                                const attDate = new Date(att.date).toLocaleDateString();\n                                                const attRegion = att.worker?.region || \"Unknown\";\n                                                const attShift = (att.shiftId || \"General\").toString();\n\n                                                // Robust matching key\n                                                const reportId = `${attDate}-${attRegion}-${attShift}`;\n                                                return reportId === selectedReport.id;\n                                            })}\n                                        />\n                                    </div>\n                                    <div className=\"px-6 py-4 border-t border-slate-100 bg-slate-50 flex justify-end\">\n                                        <button\n                                            onClick={() => setSelectedReport(null)}\n                                            className=\"px-4 py-2 bg-white border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-50 font-medium\"\n                                        >\n                                            Close\n                                        </button>\n                                    </div>\n                                </div>\n                            </div>\n                        )}\n                    </>\n                )}\n\n                {activeTab === \"mark_attendance\" && (\n                    <AttendanceTable\n                        workers={attendanceWorkers}\n                        getWorkerStatus={getWorkerStatus}\n                        getWorkerNotes={getWorkerNotes}\n                        onStatusChange={handleStatusChange}\n                        onNotesChange={handleNotesChange}\n                    />\n                )}\n\n                {activeTab === \"workers\" && (\n                    <div className=\"space-y-8\">\n                        <div className=\"flex justify-end\">\n                            <ExportButton\n                                data={flatWorkersList}\n                                fileName={`Workers_List_${new Date().toISOString().split('T')[0]}`}\n                                label=\"Export All Workers\"\n                            />\n                        </div>\n                        {(() => {\n                            // Group workers by Region -> Shift\n                            const groupedWorkers: Record<string, Record<string, Worker[]>> = {};\n\n                            filteredWorkers.forEach(w => {\n                                const region = w.region || \"Unassigned\";\n                                const shift = w.shiftName || \"No Shift\";\n\n                                if (!groupedWorkers[region]) groupedWorkers[region] = {};\n                                if (!groupedWorkers[region][shift]) groupedWorkers[region][shift] = [];\n\n                                groupedWorkers[region][shift].push(w);\n                            });\n\n                            // render\n                            return Object.entries(groupedWorkers).sort().map(([region, shifts]) => (\n                                <div key={region} className=\"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden\">\n                                    <div className=\"bg-slate-50 px-6 py-4 border-b border-slate-200 flex justify-between items-center\">\n                                        <h2 className=\"text-lg font-bold text-slate-800 flex items-center gap-2\">\n                                            <span className=\"w-2.5 h-2.5 rounded-full bg-blue-600\"></span>\n                                            {region} Region\n                                        </h2>\n                                        <span className=\"px-3 py-1 bg-white border border-slate-200 rounded-full text-xs font-medium text-slate-500\">\n                                            {Object.values(shifts).reduce((acc, curr) => acc + curr.length, 0)} Workers\n                                        </span>\n                                    </div>\n\n                                    <div className=\"p-6 space-y-8\">\n                                        {Object.entries(shifts).sort().map(([shift, workers]) => (\n                                            <div key={shift}>\n                                                <div className=\"flex items-center gap-2 mb-4\">\n                                                    <h3 className=\"font-bold text-slate-700\">{shift} Shift</h3>\n                                                    <span className=\"text-xs text-slate-400 bg-slate-100 px-2 py-0.5 rounded-full\">\n                                                        {workers.length}\n                                                    </span>\n                                                </div>\n                                                <PremiumTable\n                                                    columns={workerColumns}\n                                                    data={workers}\n                                                    actions={(item) => (\n                                                        <div className=\"flex items-center gap-3\">\n                                                            <button\n                                                                onClick={() => handleEditWorker(item as Worker)}\n                                                                className=\"text-blue-600 text-sm font-medium hover:underline flex items-center gap-1\"\n                                                            >\n                                                                Edit\n                                                            </button>\n                                                            <button\n                                                                onClick={() => handleDeleteWorker((item as Worker).id)}\n                                                                className=\"text-red-600 text-sm font-medium hover:underline flex items-center gap-1\"\n                                                            >\n                                                                Delete\n                                                            </button>\n                                                        </div>\n                                                    )}\n                                                />\n                                            </div>\n                                        ))}\n                                    </div>\n                                </div>\n                            ));\n                        })()}\n                    </div>\n                )}\n\n                {activeTab === \"users\" && data.allUsers && (\n                    <UserManagement\n                        users={data.allUsers}\n                        shifts={data.shifts}\n                        regions={data.regions}\n                    />\n                )}\n\n                {activeTab === \"staff\" && (\n                    <StaffManagement\n                        date={attendanceDate}\n                        selectedRegion={selectedRegion}\n                    />\n                )}\n            </div>\n\n            <WorkerModal\n                isOpen={isModalOpen}\n                onClose={() => setIsModalOpen(false)}\n                worker={editingWorker}\n                shifts={data.shifts}\n                regions={data.regions}\n                onSuccess={() => { }}\n            />\n        </div>\n    );\n}\n","\"use client\";\n\nimport { useState } from \"react\";\nimport { toast } from \"sonner\";\nimport { Worker, Shift, Region } from \"@/types\";\nimport { createWorker, updateWorker } from \"@/app/actions/manpower\";\n\ninterface WorkerModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    worker?: Worker | null;\n    shifts: Shift[];\n    regions: Region[];\n    onSuccess: () => void;\n}\n\nexport function WorkerModal({ isOpen, onClose, worker, shifts, regions, onSuccess }: WorkerModalProps) {\n    const [isLoading, setIsLoading] = useState(false);\n\n    if (!isOpen) return null;\n\n    const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n        e.preventDefault();\n        setIsLoading(true);\n\n        const formData = new FormData(e.currentTarget);\n\n        // Sanitize shiftId\n        const shiftId = formData.get(\"shiftId\");\n        if (shiftId === \"\") formData.delete(\"shiftId\");\n\n        try {\n            if (worker) {\n                // Update existing worker\n                const data = {\n                    name: formData.get(\"name\") as string,\n                    empId: formData.get(\"empId\") as string,\n                    role: formData.get(\"role\") as string,\n                    region: formData.get(\"region\") as string,\n                    shiftId: shiftId ? parseInt(shiftId as string) : null,\n                    status: formData.get(\"status\") as string,\n                };\n\n                const result = await updateWorker(worker.id, data);\n                if (result.success) {\n                    toast.success(\"Worker updated successfully\");\n                    onSuccess();\n                    onClose();\n                } else {\n                    toast.error(result.message);\n                }\n            } else {\n                // Create new worker\n                const result = await createWorker(formData);\n                if (result.success) {\n                    toast.success(\"Worker added successfully\");\n                    onSuccess();\n                    onClose();\n                } else {\n                    toast.error(result.message);\n                }\n            }\n        } catch {\n            toast.error(\"An error occurred\");\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    return (\n        <div className=\"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm\">\n            <div className=\"bg-white rounded-2xl w-full max-w-lg shadow-2xl overflow-hidden animate-scale-in\">\n                <div className=\"bg-slate-50 border-b border-slate-100 p-6 flex justify-between items-center\">\n                    <h3 className=\"text-xl font-bold text-slate-800\">\n                        {worker ? \"Edit Worker\" : \"Add New Worker\"}\n                    </h3>\n                    <button onClick={onClose} className=\"text-slate-400 hover:text-slate-600 transition-colors\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><path d=\"M18 6 6 18\" /><path d=\"m6 6 12 12\" /></svg>\n                    </button>\n                </div>\n\n                <form onSubmit={handleSubmit} className=\"p-6 space-y-4\">\n                    <div className=\"grid grid-cols-2 gap-4\">\n                        <div className=\"col-span-2\">\n                            <label className=\"block text-sm font-semibold text-slate-700 mb-1\">Full Name</label>\n                            <input\n                                type=\"text\"\n                                name=\"name\"\n                                defaultValue={worker?.name}\n                                required\n                                className=\"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500/20 outline-none\"\n                                placeholder=\"Worker Name\"\n                            />\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-semibold text-slate-700 mb-1\">Employee ID</label>\n                            <input\n                                type=\"text\"\n                                name=\"empId\"\n                                defaultValue={worker?.empId || \"\"}\n                                className=\"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500/20 outline-none\"\n                                placeholder=\"e.g. EMP-001\"\n                            />\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-semibold text-slate-700 mb-1\">Role</label>\n                            <input\n                                type=\"text\"\n                                name=\"role\"\n                                defaultValue={worker?.role || \"\"}\n                                className=\"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500/20 outline-none\"\n                                placeholder=\"e.g. Labor\"\n                            />\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-semibold text-slate-700 mb-1\">Region</label>\n                            <select\n                                name=\"region\"\n                                defaultValue={worker?.region || \"Riyadh\"}\n                                className=\"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500/20 outline-none bg-white\"\n                            >\n                                {regions.map(region => (\n                                    <option key={region.id} value={region.name}>{region.name}</option>\n                                ))}\n                            </select>\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-semibold text-slate-700 mb-1\">Shift</label>\n                            <select\n                                name=\"shiftId\"\n                                defaultValue={worker?.shiftId || \"\"}\n                                className=\"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500/20 outline-none bg-white\"\n                            >\n                                <option value=\"\">No Shift</option>\n                                {shifts.map(shift => (\n                                    <option key={shift.id} value={shift.id}>{shift.name}</option>\n                                ))}\n                            </select>\n                        </div>\n\n                        {worker && (\n                            <div className=\"col-span-2\">\n                                <label className=\"block text-sm font-semibold text-slate-700 mb-1\">Status</label>\n                                <select\n                                    name=\"status\"\n                                    defaultValue={worker.status || \"Active\"}\n                                    className=\"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500/20 outline-none bg-white\"\n                                >\n                                    <option value=\"Active\">Active</option>\n                                    <option value=\"Inactive\">Inactive</option>\n                                    <option value=\"On Leave\">On Leave</option>\n                                </select>\n                            </div>\n                        )}\n                    </div>\n\n                    <div className=\"pt-4 flex justify-end gap-3\">\n                        <button\n                            type=\"button\"\n                            onClick={onClose}\n                            className=\"px-4 py-2 text-slate-600 font-medium hover:bg-slate-100 rounded-lg transition-colors\"\n                        >\n                            Cancel\n                        </button>\n                        <button\n                            type=\"submit\"\n                            disabled={isLoading}\n                            className=\"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-lg shadow-blue-500/30 transition-all disabled:opacity-70\"\n                        >\n                            {isLoading ? \"Saving...\" : \"Save Worker\"}\n                        </button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    );\n}\n","/* __next_internal_action_entry_do_not_use__ [{\"406ac2ac175b3d146fe1ff4c98a98f6f06817b4a46\":\"createWorker\"},\"src/app/actions/manpower.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_0=/*#__PURE__*/createServerReference(\"406ac2ac175b3d146fe1ff4c98a98f6f06817b4a46\",callServer,void 0,findSourceMapURL,\"createWorker\");export{$$RSC_SERVER_ACTION_0 as createWorker};","/* __next_internal_action_entry_do_not_use__ [{\"6009307487f0bcc002ea2a06712ef0cf5b14151857\":\"updateWorker\"},\"src/app/actions/manpower.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_1=/*#__PURE__*/createServerReference(\"6009307487f0bcc002ea2a06712ef0cf5b14151857\",callServer,void 0,findSourceMapURL,\"updateWorker\");export{$$RSC_SERVER_ACTION_1 as updateWorker};","/* __next_internal_action_entry_do_not_use__ [{\"40314a5461dbdec936ffdaef9ba3d3c5a796eb01a5\":\"deleteWorker\"},\"src/app/actions/manpower.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_2=/*#__PURE__*/createServerReference(\"40314a5461dbdec936ffdaef9ba3d3c5a796eb01a5\",callServer,void 0,findSourceMapURL,\"deleteWorker\");export{$$RSC_SERVER_ACTION_2 as deleteWorker};","/* __next_internal_action_entry_do_not_use__ [{\"780ee3cc288d83043e5027befdbb35280be76f20f0\":\"submitBulkAttendance\"},\"src/app/actions/manpower.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_5=/*#__PURE__*/createServerReference(\"780ee3cc288d83043e5027befdbb35280be76f20f0\",callServer,void 0,findSourceMapURL,\"submitBulkAttendance\");export{$$RSC_SERVER_ACTION_5 as submitBulkAttendance};","import { User } from \"@/types\";\n\ninterface UserListProps {\n    users: User[];\n    onEdit: (user: User) => void;\n    onDelete: (username: string) => void;\n}\n\nexport function UserList({ users, onEdit, onDelete }: UserListProps) {\n    return (\n        <div className=\"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden\">\n            <div className=\"overflow-x-auto\">\n                <table className=\"w-full text-left text-sm\">\n                    <thead className=\"bg-[#F8FAFC] border-b border-slate-200\">\n                        <tr>\n                            <th className=\"px-6 py-4 font-semibold text-slate-600\">Name</th>\n                            <th className=\"px-6 py-4 font-semibold text-slate-600\">Username</th>\n                            <th className=\"px-6 py-4 font-semibold text-slate-600\">Role</th>\n                            <th className=\"px-6 py-4 font-semibold text-slate-600\">Region</th>\n                            <th className=\"px-6 py-4 font-semibold text-slate-600\">Shift</th>\n                            <th className=\"px-6 py-4 font-semibold text-slate-600 text-right\">Actions</th>\n                        </tr>\n                    </thead>\n                    <tbody className=\"divide-y divide-slate-100\">\n                        {users.map((user) => (\n                            <tr key={user.username} className=\"hover:bg-slate-50/50 transition-colors\">\n                                <td className=\"px-6 py-4 font-medium text-slate-900\">{user.name}</td>\n                                <td className=\"px-6 py-4 text-slate-600\">{user.username}</td>\n                                <td className=\"px-6 py-4\">\n                                    <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium capitalize\n                                        ${user.role === 'manager' ? 'bg-purple-100 text-purple-700' :\n                                            user.role === 'supervisor' ? 'bg-blue-100 text-blue-700' :\n                                                'bg-slate-100 text-slate-700'}`}>\n                                        {user.role}\n                                    </span>\n                                </td>\n                                <td className=\"px-6 py-4 text-slate-600\">{user.region || \"-\"}</td>\n                                <td className=\"px-6 py-4 text-slate-600\">{user.shiftName || \"-\"}</td>\n                                <td className=\"px-6 py-4 text-right\">\n                                    <div className=\"flex items-center justify-end gap-2\">\n                                        <button\n                                            onClick={() => onEdit(user)}\n                                            className=\"p-1.5 text-blue-600 hover:bg-blue-50 rounded\"\n                                        >\n                                            Edit\n                                        </button>\n                                        <button\n                                            onClick={() => onDelete(user.username)}\n                                            className=\"p-1.5 text-red-600 hover:bg-red-50 rounded\"\n                                        >\n                                            Delete\n                                        </button>\n                                    </div>\n                                </td>\n                            </tr>\n                        ))}\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    );\n}\n","/* __next_internal_action_entry_do_not_use__ [{\"40ee2ba9059aa813d068939e092131fc7754826348\":\"createUser\"},\"src/app/actions/users.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_1=/*#__PURE__*/createServerReference(\"40ee2ba9059aa813d068939e092131fc7754826348\",callServer,void 0,findSourceMapURL,\"createUser\");export{$$RSC_SERVER_ACTION_1 as createUser};","/* __next_internal_action_entry_do_not_use__ [{\"60a83923fc2a86194187f0e847e5fddd3c120dcc97\":\"updateUser\"},\"src/app/actions/users.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_2=/*#__PURE__*/createServerReference(\"60a83923fc2a86194187f0e847e5fddd3c120dcc97\",callServer,void 0,findSourceMapURL,\"updateUser\");export{$$RSC_SERVER_ACTION_2 as updateUser};","\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { User, Shift, Region } from \"@/types\";\nimport { createUser, updateUser } from \"@/app/actions/users\";\nimport { USER_ROLES } from \"@/lib/constants\";\n\ninterface UserModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    user: User | null;\n    shifts: Shift[];\n    regions: Region[];\n    onSuccess: () => void;\n}\n\nexport function UserModal({ isOpen, onClose, user, shifts, regions, onSuccess }: UserModalProps) {\n    const [isLoading, setIsLoading] = useState(false);\n    const [error, setError] = useState(\"\");\n    const [formData, setFormData] = useState({\n        username: \"\",\n        password: \"\",\n        name: \"\",\n        role: \"supervisor\",\n        region: \"\",\n        shiftId: \"\",\n        allowedShifts: \"\",\n    });\n\n    useEffect(() => {\n        if (user) {\n            setFormData({\n                username: user.username,\n                password: \"\", // Don't fill password on edit\n                name: user.name || \"\",\n                role: user.role || \"supervisor\",\n                region: user.region || \"\",\n                shiftId: user.shiftId?.toString() || \"\",\n                allowedShifts: user.allowedShifts || \"\",\n            });\n        } else {\n            setFormData({\n                username: \"\",\n                password: \"\",\n                name: \"\",\n                role: \"supervisor\",\n                region: \"\",\n                shiftId: \"\",\n                allowedShifts: \"\",\n            });\n        }\n        setError(\"\");\n    }, [user, isOpen]);\n\n    const handleRegionToggle = (regionName: string) => {\n        const currentRegions = formData.region ? formData.region.split(\",\").map(r => r.trim()).filter(Boolean) : [];\n        let newRegions;\n        if (currentRegions.includes(regionName)) {\n            newRegions = currentRegions.filter(r => r !== regionName);\n        } else {\n            newRegions = [...currentRegions, regionName];\n        }\n        setFormData({ ...formData, region: newRegions.join(\",\") });\n    };\n\n    const handleShiftToggle = (shiftName: string) => {\n        const currentShifts = formData.allowedShifts ? formData.allowedShifts.split(\",\").map(s => s.trim()).filter(Boolean) : [];\n        let newShifts;\n        if (currentShifts.includes(shiftName)) {\n            newShifts = currentShifts.filter(s => s !== shiftName);\n        } else {\n            newShifts = [...currentShifts, shiftName];\n        }\n        setFormData({ ...formData, allowedShifts: newShifts.join(\",\") });\n    };\n\n    if (!isOpen) return null;\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setIsLoading(true);\n        setError(\"\");\n\n        try {\n            if (user) {\n                const res = await updateUser(user.username, formData);\n                if (res.success) {\n                    onSuccess();\n                    onClose();\n                } else {\n                    setError(res.message || \"Failed to update user\");\n                }\n            } else {\n                const res = await createUser(formData);\n                if (res.success) {\n                    onSuccess();\n                    onClose();\n                } else {\n                    setError(res.message || \"Failed to create user\");\n                }\n            }\n        } catch {\n            setError(\"An error occurred\");\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    return (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm\">\n            <div className=\"bg-white rounded-xl shadow-xl w-full max-w-md overflow-hidden\">\n                <div className=\"px-6 py-4 border-b border-slate-100 flex justify-between items-center\">\n                    <h3 className=\"font-bold text-lg text-slate-800\">\n                        {user ? \"Edit User\" : \"New User\"}\n                    </h3>\n                    <button onClick={onClose} className=\"text-slate-400 hover:text-slate-600\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" /><line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" /></svg>\n                    </button>\n                </div>\n\n                <form onSubmit={handleSubmit} className=\"p-6 space-y-4 max-h-[80vh] overflow-y-auto\">\n                    {error && (\n                        <div className=\"p-3 text-sm text-red-600 bg-red-50 rounded-lg\">\n                            {error}\n                        </div>\n                    )}\n\n                    <div>\n                        <label className=\"block text-sm font-medium text-slate-700 mb-1\">Username</label>\n                        <input\n                            type=\"text\"\n                            required\n                            disabled={!!user}\n                            value={formData.username}\n                            onChange={(e) => setFormData({ ...formData, username: e.target.value })}\n                            className=\"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 disabled:bg-slate-50 outline-none transition-all\"\n                        />\n                    </div>\n\n                    <div>\n                        <label className=\"block text-sm font-medium text-slate-700 mb-1\">\n                            Password {user && <span className=\"text-slate-400 font-normal\">(Leave blank to keep current)</span>}\n                        </label>\n                        <input\n                            type=\"password\"\n                            required={!user}\n                            value={formData.password}\n                            onChange={(e) => setFormData({ ...formData, password: e.target.value })}\n                            className=\"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-all\"\n                        />\n                    </div>\n\n                    <div>\n                        <label className=\"block text-sm font-medium text-slate-700 mb-1\">Full Name</label>\n                        <input\n                            type=\"text\"\n                            required\n                            value={formData.name}\n                            onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                            className=\"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none transition-all\"\n                        />\n                    </div>\n\n                    <div>\n                        <label className=\"block text-sm font-medium text-slate-700 mb-1\">Role</label>\n                        <select\n                            className=\"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none bg-white transition-all\"\n                            value={formData.role}\n                            onChange={(e) => setFormData({ ...formData, role: e.target.value })}\n                        >\n                            {Object.values(USER_ROLES).map(role => (\n                                <option key={role} value={role}>{role}</option>\n                            ))}\n                        </select>\n                    </div>\n\n                    <div className=\"space-y-4 pt-2 border-t border-slate-50\">\n                        <div>\n                            <label className=\"block text-sm font-medium text-slate-700 mb-2\">Responsible Regions</label>\n                            <div className=\"grid grid-cols-2 gap-2 p-3 border rounded-lg bg-slate-50\">\n                                {regions.map((r) => {\n                                    const isSelected = formData.region.split(\",\").map(item => item.trim()).filter(Boolean).includes(r.name);\n                                    return (\n                                        <label key={r.id} className=\"flex items-center gap-2 cursor-pointer group\">\n                                            <input\n                                                type=\"checkbox\"\n                                                checked={isSelected}\n                                                onChange={() => handleRegionToggle(r.name)}\n                                                className=\"w-4 h-4 rounded text-blue-600 focus:ring-blue-500 border-slate-300 transition-all\"\n                                            />\n                                            <span className={`text-sm transition-colors ${isSelected ? 'text-blue-700 font-medium' : 'text-slate-600 group-hover:text-slate-900'}`}>\n                                                {r.name}\n                                            </span>\n                                        </label>\n                                    );\n                                })}\n                            </div>\n                            {formData.region === \"\" && (\n                                <p className=\"mt-1 text-[10px] text-amber-600\">No regions selected.</p>\n                            )}\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-slate-700 mb-1\">Shift Assignment</label>\n                            <select\n                                className=\"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none bg-white transition-all\"\n                                value={formData.shiftId}\n                                onChange={(e) => setFormData({ ...formData, shiftId: e.target.value })}\n                            >\n                                <option value=\"\">Select Shift</option>\n                                {shifts.map((s) => (\n                                    <option key={s.id} value={s.id}>{s.name}</option>\n                                ))}\n                            </select>\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-slate-700 mb-2\">Can Attend Shifts</label>\n                            <div className=\"grid grid-cols-2 gap-2 p-3 border rounded-lg bg-slate-50\">\n                                {shifts.map((s) => {\n                                    const isSelected = formData.allowedShifts.split(\",\").map(item => item.trim()).filter(Boolean).includes(s.name);\n                                    return (\n                                        <label key={s.id} className=\"flex items-center gap-2 cursor-pointer group\">\n                                            <input\n                                                type=\"checkbox\"\n                                                checked={isSelected}\n                                                onChange={() => handleShiftToggle(s.name)}\n                                                className=\"w-4 h-4 rounded text-blue-600 focus:ring-blue-500 border-slate-300 transition-all\"\n                                            />\n                                            <span className={`text-sm transition-colors ${isSelected ? 'text-blue-700 font-medium' : 'text-slate-600 group-hover:text-slate-900'}`}>\n                                                {s.name}\n                                            </span>\n                                        </label>\n                                    );\n                                })}\n                            </div>\n                            {formData.allowedShifts === \"\" && (\n                                <p className=\"mt-1 text-[10px] text-slate-400 italic\">Default: Own shift only</p>\n                            )}\n                        </div>\n                    </div>\n\n                    <div className=\"pt-4 flex justify-end gap-3 sticky bottom-0 bg-white\">\n                        <button\n                            type=\"button\"\n                            onClick={onClose}\n                            className=\"px-4 py-2 text-slate-600 hover:bg-slate-50 rounded-lg text-sm font-medium transition-colors\"\n                        >\n                            Cancel\n                        </button>\n                        <button\n                            type=\"submit\"\n                            disabled={isLoading}\n                            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 shadow-md shadow-blue-500/20 transition-all disabled:opacity-50\"\n                        >\n                            {isLoading ? \"Saving...\" : \"Save User\"}\n                        </button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    );\n}\n","/* __next_internal_action_entry_do_not_use__ [{\"4034125df2cbdc005c8af2030decfdd3f9c1030b38\":\"deleteUser\"},\"src/app/actions/users.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_3=/*#__PURE__*/createServerReference(\"4034125df2cbdc005c8af2030decfdd3f9c1030b38\",callServer,void 0,findSourceMapURL,\"deleteUser\");export{$$RSC_SERVER_ACTION_3 as deleteUser};","\"use client\";\n\nimport { useState } from \"react\";\nimport { toast } from \"sonner\";\nimport { useRouter } from \"next/navigation\";\nimport { UserList } from \"./UserList\";\nimport { UserModal } from \"./UserModal\";\nimport { User, Shift, Region } from \"@/types\";\nimport { deleteUser } from \"@/app/actions/users\";\n\ninterface UserManagementProps {\n    users: User[];\n    shifts: Shift[];\n    regions: Region[];\n}\n\nexport function UserManagement({ users: initialUsers, shifts, regions }: UserManagementProps) {\n    const router = useRouter();\n    const [isModalOpen, setIsModalOpen] = useState(false);\n    const [editingUser, setEditingUser] = useState<User | null>(null);\n    const [isDeleting, setIsDeleting] = useState(false);\n\n    const handleOpenModal = (user?: User) => {\n        setEditingUser(user || null);\n        setIsModalOpen(true);\n    };\n\n    const handleDelete = async (username: string) => {\n        if (!confirm(\"Are you sure you want to delete this user?\")) return;\n        if (isDeleting) return;\n\n        setIsDeleting(true);\n        const toastId = toast.loading(\"Deleting user...\");\n\n        try {\n            const res = await deleteUser(username);\n            if (res.success) {\n                toast.success(\"User deleted\", { id: toastId });\n                router.refresh();\n            } else {\n                toast.error(res.message, { id: toastId });\n            }\n        } catch {\n            toast.error(\"An error occurred\", { id: toastId });\n        } finally {\n            setIsDeleting(false);\n        }\n    };\n\n    const handleSuccess = () => {\n        router.refresh();\n    };\n\n    return (\n        <div className=\"space-y-6\">\n            <div className=\"flex justify-between items-center bg-white p-4 rounded-xl border border-slate-200 shadow-sm\">\n                <div>\n                    <h2 className=\"text-lg font-bold text-slate-800\">System Users</h2>\n                    <p className=\"text-sm text-slate-500\">Manage access and roles</p>\n                </div>\n                <button\n                    onClick={() => handleOpenModal()}\n                    className=\"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors flex items-center gap-2\"\n                >\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><path d=\"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\" /><circle cx=\"9\" cy=\"7\" r=\"4\" /><line x1=\"20\" y1=\"8\" x2=\"20\" y2=\"14\" /><line x1=\"23\" y1=\"11\" x2=\"17\" y2=\"11\" /></svg>\n                    New User\n                </button>\n            </div>\n\n            <UserList\n                users={initialUsers}\n                onEdit={handleOpenModal}\n                onDelete={handleDelete}\n            />\n\n            <UserModal\n                isOpen={isModalOpen}\n                onClose={() => setIsModalOpen(false)}\n                user={editingUser}\n                shifts={shifts}\n                regions={regions}\n                onSuccess={handleSuccess}\n            />\n        </div>\n    );\n}\n","\n\n\ninterface AttendanceActionControlsProps {\n    activeTab: string;\n    userRole: string;\n    attendanceDate: string;\n    setAttendanceDate: (date: string) => void;\n    selectedRegion: string;\n    setSelectedRegion: (region: string) => void;\n    availableRegions: { id: number; name: string }[];\n    selectedShift: string;\n    setSelectedShift: (shift: string) => void;\n    shifts: { id: number; name: string }[];\n    onSubmit: () => void;\n    onAddWorker: () => void;\n    isLoading?: boolean;\n    mode?: 'all' | 'filters' | 'actions';\n}\n\nexport function AttendanceActionControls({\n    activeTab,\n    userRole,\n    attendanceDate,\n    setAttendanceDate,\n    selectedRegion,\n    setSelectedRegion,\n    availableRegions,\n    selectedShift,\n    setSelectedShift,\n    shifts,\n    onSubmit,\n    onAddWorker,\n    isLoading = false,\n    mode = 'all'\n}: AttendanceActionControlsProps) {\n    const showFilters = mode === 'all' || mode === 'filters';\n    const showActions = mode === 'all' || mode === 'actions';\n\n    return (\n        <div className=\"flex flex-col md:flex-row gap-3 w-full md:w-auto items-center\">\n            {showFilters && (\n                <>\n                    <div className=\"relative w-full md:w-auto\">\n                        <input\n                            type=\"date\"\n                            value={attendanceDate}\n                            onChange={(e) => setAttendanceDate(e.target.value)}\n                            className=\"w-full md:w-auto px-3 py-2 border border-slate-200 rounded-lg text-sm font-medium text-slate-700 outline-none focus:ring-2 focus:ring-blue-500 bg-white\"\n                        />\n                    </div>\n\n                    <select\n                        value={selectedRegion}\n                        onChange={(e) => setSelectedRegion(e.target.value)}\n                        className=\"w-full md:w-auto px-3 py-2 border border-slate-200 rounded-lg text-sm font-medium text-slate-700 outline-none focus:ring-2 focus:ring-blue-500 bg-white\"\n                    >\n                        <option value=\"All\">All Regions</option>\n                        {availableRegions.map(r => (\n                            <option key={r.id} value={r.name}>{r.name}</option>\n                        ))}\n                    </select>\n\n                    {userRole === \"supervisor\" && shifts.length <= 1 ? (\n                        <div className=\"w-full md:w-auto px-3 py-2 bg-slate-100 border border-slate-200 rounded-lg text-sm font-medium text-slate-600 text-center\">\n                            Shift: {shifts.find(s => s.id.toString() === selectedShift)?.name || \"Assigned Shift\"}\n                        </div>\n                    ) : (\n                        <select\n                            value={selectedShift}\n                            onChange={(e) => setSelectedShift(e.target.value)}\n                            className=\"w-full md:w-auto px-3 py-2 border border-slate-200 rounded-lg text-sm font-medium text-slate-700 outline-none focus:ring-2 focus:ring-blue-500 bg-white\"\n                        >\n                            <option value=\"All\">All Shifts</option>\n                            {shifts.map(s => (\n                                <option key={s.id} value={s.id}>{s.name}</option>\n                            ))}\n                        </select>\n                    )}\n                </>\n            )}\n\n            {showActions && (\n                <>\n                    {activeTab === \"mark_attendance\" && (\n                        <button\n                            onClick={onSubmit}\n                            disabled={isLoading}\n                            className={`px-4 py-2 text-white rounded-lg shadow-sm font-medium text-sm w-full md:w-auto transition-colors ${isLoading\n                                ? \"bg-slate-400 cursor-not-allowed\"\n                                : \"bg-green-600 hover:bg-green-700\"\n                                }`}\n                        >\n                            {isLoading ? \"Submitting...\" : \"Submit Attendance\"}\n                        </button>\n                    )}\n\n                    {activeTab === \"workers\" && (\n                        <button\n                            onClick={onAddWorker}\n                            className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-sm font-medium text-sm w-full md:w-auto justify-center\"\n                        >\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><path d=\"M5 12h14\" /><path d=\"M12 5v14\" /></svg>\n                            Add Worker\n                        </button>\n                    )}\n                </>\n            )}\n        </div>\n    );\n}\n\n","import { Worker } from \"@/types\";\n\ninterface AttendanceTableProps {\n    workers: Worker[];\n    getWorkerStatus: (workerId: number) => string;\n    getWorkerNotes: (workerId: number) => string;\n    onStatusChange: (workerId: number, status: string) => void;\n    onNotesChange: (workerId: number, notes: string) => void;\n}\n\nexport function AttendanceTable({\n    workers,\n    getWorkerStatus,\n    getWorkerNotes,\n    onStatusChange,\n    onNotesChange\n}: AttendanceTableProps) {\n    if (workers.length === 0) {\n        return (\n            <div className=\"text-center py-8 text-slate-500\">\n                No workers found matching filters. Please select a Region and Shift.\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"overflow-x-auto\">\n            <table className=\"w-full text-sm text-left\">\n                <thead className=\"bg-slate-50 text-slate-500 font-medium border-b border-slate-200\">\n                    <tr key=\"header-row\">\n                        <th className=\"px-4 py-3\">Worker</th>\n                        <th className=\"px-4 py-3\">Region / Shift</th>\n                        <th className=\"px-4 py-3\">Status</th>\n                        <th className=\"px-4 py-3\">Notes</th>\n                    </tr>\n                </thead>\n                <tbody className=\"divide-y divide-slate-100\">\n                    {workers.map(worker => (\n                        <tr key={worker.id} className=\"hover:bg-slate-50 transition-colors\">\n                            <td className=\"px-4 py-3\">\n                                <div className=\"font-medium text-slate-900\">{worker.name}</div>\n                                <div className=\"text-xs text-slate-400\">{worker.empId}</div>\n                            </td>\n                            <td className=\"px-4 py-3\">\n                                <div className=\"text-slate-700\">{worker.region}</div>\n                                <div className=\"text-xs text-slate-500\">{worker.shiftName}</div>\n                            </td>\n                            <td className=\"px-4 py-3\">\n                                <div className=\"flex gap-2\">\n                                    {[\"Present\", \"Absent\", \"Vacation\", \"Day Off\", \"Sick Leave\"].map(status => (\n                                        <button\n                                            key={status}\n                                            onClick={() => onStatusChange(worker.id, status)}\n                                            className={`px-3 py-1 rounded-full text-xs font-medium border transition-all ${getWorkerStatus(worker.id) === status\n                                                ? status === \"Present\"\n                                                    ? \"bg-green-100 text-green-700 border-green-200\"\n                                                    : status === \"Absent\"\n                                                        ? \"bg-red-100 text-red-700 border-red-200\"\n                                                        : \"bg-blue-100 text-blue-700 border-blue-200\"\n                                                : \"bg-white text-slate-500 border-slate-200 hover:border-slate-300\"\n                                                }`}\n                                        >\n                                            {status}\n                                        </button>\n                                    ))}\n                                </div>\n                            </td>\n                            <td className=\"px-4 py-3\">\n                                <input\n                                    type=\"text\"\n                                    placeholder=\"Add notes...\"\n                                    value={getWorkerNotes(worker.id)}\n                                    onChange={(e) => onNotesChange(worker.id, e.target.value)}\n                                    className=\"w-full px-3 py-1 text-xs border border-slate-200 rounded focus:ring-1 focus:ring-blue-500 outline-none\"\n                                />\n                            </td>\n                        </tr>\n                    ))}\n                </tbody>\n            </table>\n        </div>\n    );\n}\n","/* __next_internal_action_entry_do_not_use__ [{\"0003c8a1bd8ed2fe6e53cb9e9606d4dbea40fd5571\":\"getStaffList\"},\"src/app/actions/staff.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_0=/*#__PURE__*/createServerReference(\"0003c8a1bd8ed2fe6e53cb9e9606d4dbea40fd5571\",callServer,void 0,findSourceMapURL,\"getStaffList\");export{$$RSC_SERVER_ACTION_0 as getStaffList};","/* __next_internal_action_entry_do_not_use__ [{\"40a6297af27422d4551288b5192f26872415ba489b\":\"getStaffAttendance\"},\"src/app/actions/staff.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_1=/*#__PURE__*/createServerReference(\"40a6297af27422d4551288b5192f26872415ba489b\",callServer,void 0,findSourceMapURL,\"getStaffAttendance\");export{$$RSC_SERVER_ACTION_1 as getStaffAttendance};","/* __next_internal_action_entry_do_not_use__ [{\"7c6dc3d93bd39156d689187aa772474e629cd3f5e5\":\"markStaffAttendance\"},\"src/app/actions/staff.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";const $$RSC_SERVER_ACTION_2=/*#__PURE__*/createServerReference(\"7c6dc3d93bd39156d689187aa772474e629cd3f5e5\",callServer,void 0,findSourceMapURL,\"markStaffAttendance\");export{$$RSC_SERVER_ACTION_2 as markStaffAttendance};","\"use client\";\n\nimport { useState, useEffect, useCallback } from \"react\";\nimport { PremiumTable } from \"@/components/PremiumTable\";\nimport { getStaffList, getStaffAttendance, markStaffAttendance } from \"@/app/actions/staff\";\nimport { toast } from \"sonner\";\n\ninterface StaffUser {\n    id: number;\n    name: string;\n    username: string;\n    role: string;\n    region: string | null;\n    shift: { name: string } | null;\n}\n\ninterface StaffAttendanceRecord {\n    userId: number;\n    status: string;\n    coveredBy: number | null;\n    coverUser?: { name: string };\n    notes?: string;\n}\n\nexport function StaffManagement({ date: globalDate, selectedRegion }: { date?: string; selectedRegion?: string }) {\n    const [date, setDate] = useState(globalDate || new Date().toISOString().split(\"T\")[0]);\n    const [staff, setStaff] = useState<StaffUser[]>([]);\n    const [attendance, setAttendance] = useState<Record<number, StaffAttendanceRecord>>({});\n    const [loading, setLoading] = useState(true);\n\n    const loadData = useCallback(async () => {\n        setLoading(true);\n        try {\n            const [staffRes, attendanceRes] = await Promise.all([\n                getStaffList(),\n                getStaffAttendance(date)\n            ]);\n\n            if (staffRes.success && staffRes.data) {\n                setStaff(staffRes.data);\n            }\n\n            if (attendanceRes.success && attendanceRes.data) {\n                const attMap: Record<number, StaffAttendanceRecord> = {};\n                attendanceRes.data.forEach(r => {\n                    attMap[r.userId] = {\n                        userId: r.userId,\n                        status: r.status || \"Absent\",\n                        coveredBy: r.coveredBy,\n                        coverUser: r.coverUser || undefined,\n                        notes: r.notes || undefined\n                    };\n                });\n                setAttendance(attMap);\n            }\n        } catch {\n            toast.error(\"Failed to load staff data\");\n        } finally {\n            setLoading(false);\n        }\n    }, [date]);\n\n    // Load initial data\n    useEffect(() => {\n        loadData();\n    }, [loadData]);\n\n    // Sync with global date\n    useEffect(() => {\n        if (globalDate) {\n            setDate(globalDate);\n        }\n    }, [globalDate]);\n\n    const [busyIds, setBusyIds] = useState<Set<number>>(new Set());\n\n    const handleStatusChange = async (userId: number, status: string) => {\n        if (busyIds.has(userId)) return;\n\n        setBusyIds(prev => new Set(prev).add(userId));\n        // Optimistic update\n        setAttendance(prev => ({\n            ...prev,\n            [userId]: { ...prev[userId], status, userId }\n        }));\n\n        try {\n            await markStaffAttendance(userId, status, date, attendance[userId]?.coveredBy, attendance[userId]?.notes);\n            toast.success(\"Attendance marked\");\n        } catch {\n            toast.error(\"Failed to update\");\n            loadData(); // Revert\n        } finally {\n            setBusyIds(prev => {\n                const next = new Set(prev);\n                next.delete(userId);\n                return next;\n            });\n        }\n    };\n\n    const handleCoverChange = async (userId: number, coveredBy: string) => {\n        if (busyIds.has(userId)) return;\n        setBusyIds(prev => new Set(prev).add(userId));\n\n        const coverId = coveredBy ? parseInt(coveredBy) : null;\n\n        setAttendance(prev => ({\n            ...prev,\n            [userId]: { ...prev[userId], coveredBy: coverId, userId }\n        }));\n\n        try {\n            await markStaffAttendance(userId, \"Absent\", date, coverId, attendance[userId]?.notes);\n            toast.success(\"Coverage assigned\");\n        } catch {\n            toast.error(\"Failed to update coverage\");\n        } finally {\n            setBusyIds(prev => {\n                const next = new Set(prev);\n                next.delete(userId);\n                return next;\n            });\n        }\n    };\n\n    const filteredStaff = staff.filter(s => {\n        if (selectedRegion && selectedRegion !== \"All\" && s.region !== selectedRegion) return false;\n        return true;\n    });\n\n    const supervisors = filteredStaff.filter(s => s.role === \"supervisor\");\n\n    const columns = [\n        { header: \"Name\", accessorKey: \"name\" as const, render: (row: StaffUser) => <span className=\"font-medium text-slate-900\">{row.name}</span> },\n        { header: \"Role\", accessorKey: \"role\" as const, render: (row: StaffUser) => <span className=\"capitalize\">{row.role}</span> },\n        { header: \"Region\", accessorKey: \"region\" as const, render: (row: StaffUser) => row.region || \"-\" },\n        {\n            header: \"Status\",\n            render: (row: StaffUser) => (\n                <div className=\"flex gap-2\">\n                    {[\"Present\", \"Absent\", \"Vacation\", \"Day Off\", \"Sick Leave\"].map((status) => (\n                        <button\n                            key={status}\n                            disabled={busyIds.has(row.id)}\n                            onClick={() => handleStatusChange(row.id, status)}\n                            className={`px-3 py-1 rounded-md text-sm font-medium transition-colors ${attendance[row.id]?.status === status\n                                ? (status === \"Present\" ? \"bg-green-100 text-green-700 border border-green-200\" :\n                                    status === \"Absent\" ? \"bg-red-100 text-red-700 border border-red-200\" :\n                                        status === \"Vacation\" ? \"bg-blue-100 text-blue-700 border border-blue-200\" :\n                                            status === \"Day Off\" ? \"bg-indigo-100 text-indigo-700 border border-indigo-200\" :\n                                                \"bg-amber-100 text-amber-700 border border-amber-200\")\n                                : \"bg-slate-50 text-slate-500 hover:bg-slate-100 disabled:opacity-50\"\n                                }`}\n                        >\n                            {status === \"Sick Leave\" ? \"Sick\" : status}\n                        </button>\n                    ))}\n                </div>\n            )\n        },\n        {\n            header: \"Covered By\",\n            render: (row: StaffUser) => {\n                const status = attendance[row.id]?.status;\n                const needsCoverage = [\"Absent\", \"Vacation\", \"Sick Leave\"].includes(status || \"\");\n                if (!needsCoverage || row.role !== 'supervisor') return <span className=\"text-slate-400 text-xs\">-</span>;\n\n                return (\n                    <select\n                        disabled={busyIds.has(row.id)}\n                        value={attendance[row.id]?.coveredBy?.toString() || \"\"}\n                        onChange={(e) => handleCoverChange(row.id, e.target.value)}\n                        className=\"px-2 py-1 text-sm border border-slate-200 rounded-md focus:ring-2 focus:ring-blue-500 outline-none w-48 disabled:bg-slate-50\"\n                    >\n                        <option value=\"\">Select Cover...</option>\n                        {supervisors\n                            .filter(s => s.id !== row.id) // Can't cover self\n                            .map(s => (\n                                <option key={s.id} value={s.id}>\n                                    {s.name} ({s.region || \"No Region\"})\n                                </option>\n                            ))\n                        }\n                    </select>\n                );\n            }\n        }\n    ];\n\n    if (loading && staff.length === 0) return <div className=\"p-6 text-center\">Loading staff data...</div>;\n\n    return (\n        <div className=\"space-y-6\">\n            <div className=\"bg-white p-4 rounded-xl border border-slate-200 shadow-sm\">\n                <div>\n                    <h2 className=\"text-lg font-bold text-slate-800\">Staff Attendance</h2>\n                    <p className=\"text-sm text-slate-500\">Mark attendance for supervisors and management</p>\n                </div>\n            </div>\n\n            <div className=\"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden\">\n                <PremiumTable\n                    columns={columns}\n                    data={filteredStaff}\n                />\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}